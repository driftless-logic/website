---
import Layout from '../layouts/Layout.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
---

<Layout title="Contact Driftless Logic - Let's Talk">
  <Header />

  <!-- Hero Section -->
  <section class="relative pt-20 pb-12 overflow-hidden bg-white">
    <div class="absolute inset-0 bg-topo-pattern pointer-events-none opacity-100"></div>
    <div class="absolute top-0 right-0 w-[500px] h-[500px] bg-primary/10 rounded-full blur-[100px] pointer-events-none mix-blend-multiply"></div>

    <div class="relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
      <div class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-gray-50 px-3 py-1 mb-8 shadow-sm">
        <span class="material-symbols-outlined text-primary text-sm">mail</span>
        <span class="text-xs font-medium text-gray-600">Contact</span>
      </div>

      <h1 class="text-4xl md:text-6xl font-bold tracking-tighter text-gray-900 mb-6 leading-[1.1]">
        Let's <span class="text-primary">talk.</span>
      </h1>

      <p class="max-w-2xl mx-auto text-lg text-gray-500 leading-relaxed">
        Whether you're exploring partnership opportunities, interested in the Driftless methodology, or just want to compare notes on where software development is headed—I'd like to hear from you.
      </p>
    </div>
  </section>

  <!-- Contact Form Section -->
  <section class="py-16 bg-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-16">
        <!-- Form -->
        <div>
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Send a Message</h2>
          <form id="contact-form" class="space-y-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div>
                <label for="name" class="block text-sm font-medium text-gray-700 mb-1">Name *</label>
                <input type="text" id="name" name="name" required class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 focus:border-primary focus:ring-primary" />
              </div>
              <div>
                <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email *</label>
                <input type="email" id="email" name="email" required class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 focus:border-primary focus:ring-primary" />
              </div>
            </div>
            <div>
              <label for="organization" class="block text-sm font-medium text-gray-700 mb-1">Organization</label>
              <input type="text" id="organization" name="organization" class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 focus:border-primary focus:ring-primary" />
            </div>
            <div>
              <label for="subject" class="block text-sm font-medium text-gray-700 mb-1">Subject</label>
              <select id="subject" name="subject" class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 focus:border-primary focus:ring-primary">
                <option value="partnership">Partnership Inquiry</option>
                <option value="methodology">Methodology Questions</option>
                <option value="swarm">Swarm Waitlist</option>
                <option value="federal">Federal Contracting</option>
                <option value="general">General Inquiry</option>
              </select>
            </div>
            <div>
              <label for="message" class="block text-sm font-medium text-gray-700 mb-1">Message *</label>
              <textarea id="message" name="message" rows="5" required class="w-full rounded-lg border border-gray-300 px-4 py-3 text-gray-900 focus:border-primary focus:ring-primary resize-none"></textarea>
            </div>
            <button type="submit" id="submit-btn" class="w-full flex items-center justify-center gap-2 rounded-lg bg-primary px-8 py-4 text-base font-bold text-black hover:bg-green-400 transition-all shadow-lg shadow-primary/30">
              <span id="btn-text">Send Message</span>
              <span id="btn-icon" class="material-symbols-outlined text-[20px]">send</span>
            </button>
            <div id="form-status" class="hidden rounded-lg p-4 text-center font-medium"></div>
          </form>
        </div>

        <!-- Contact Info -->
        <div>
          <h2 class="text-2xl font-bold text-gray-900 mb-6">Direct Contact</h2>

          <div class="space-y-8">
            <div>
              <p class="text-gray-500 mb-2">Prefer to reach out directly?</p>
              <a href="mailto:jake@driftlesslogic.com" class="text-lg font-semibold text-primary hover:text-green-600 flex items-center gap-2">
                <span class="material-symbols-outlined">mail</span>
                jake@driftlesslogic.com
              </a>
            </div>

            <div>
              <h3 class="text-lg font-bold text-gray-900 mb-4">Connect</h3>
              <div class="space-y-3">
                <a href="https://linkedin.com/company/driftless-logic" target="_blank" rel="noopener" class="flex items-center gap-3 text-gray-600 hover:text-primary transition-colors">
                  <span class="material-symbols-outlined">group</span>
                  LinkedIn
                </a>
                <a href="https://twitter.com/DriftlessLogic" target="_blank" rel="noopener" class="flex items-center gap-3 text-gray-600 hover:text-primary transition-colors">
                  <span class="material-symbols-outlined">tag</span>
                  X / Twitter
                </a>
                <a href="https://github.com/driftless-logic" target="_blank" rel="noopener" class="flex items-center gap-3 text-gray-600 hover:text-primary transition-colors">
                  <span class="material-symbols-outlined">code</span>
                  GitHub
                </a>
                <a href="https://medium.com/@driftlesslogic" target="_blank" rel="noopener" class="flex items-center gap-3 text-gray-600 hover:text-primary transition-colors">
                  <span class="material-symbols-outlined">article</span>
                  Medium
                </a>
                <a href="https://youtube.com/@DriftlessLogic" target="_blank" rel="noopener" class="flex items-center gap-3 text-gray-600 hover:text-primary transition-colors">
                  <span class="material-symbols-outlined">play_circle</span>
                  YouTube
                </a>
              </div>
            </div>

            <div class="bg-gray-50 rounded-xl p-6 border border-gray-200">
              <h3 class="text-lg font-bold text-gray-900 mb-2">Response Time</h3>
              <p class="text-gray-500">I read every message personally and typically respond within 1-2 business days.</p>
            </div>

            <div class="bg-gray-50 rounded-xl p-6 border border-gray-200">
              <h3 class="text-lg font-bold text-gray-900 mb-2">Location</h3>
              <p class="text-gray-500">Driftless Logic LLC is based in Wisconsin's Driftless Region—the rugged, unglaciated terrain that inspired our name and our approach.</p>
            </div>

            <div class="bg-primary/10 rounded-xl p-6 border border-primary/30">
              <h3 class="text-lg font-bold text-gray-900 mb-2">For Federal Contracting</h3>
              <p class="text-gray-600">Driftless Logic is a Service-Disabled Veteran-Owned Small Business currently completing federal registration. For contracting inquiries, please include your agency and program details in your message.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <Footer />

  <script is:inline>
    const form = document.getElementById('contact-form');
    const submitBtn = document.getElementById('submit-btn');
    const btnText = document.getElementById('btn-text');
    const btnIcon = document.getElementById('btn-icon');
    const formStatus = document.getElementById('form-status');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      // Disable button and show loading
      submitBtn.disabled = true;
      btnText.textContent = 'Sending...';
      btnIcon.textContent = 'hourglass_empty';
      formStatus.classList.add('hidden');

      const formData = {
        name: document.getElementById('name').value,
        email: document.getElementById('email').value,
        organization: document.getElementById('organization').value,
        subject: document.getElementById('subject').value,
        message: document.getElementById('message').value,
      };

      try {
        const response = await fetch('https://spybovnq3nkwxp33ix5styhgu40ddkob.lambda-url.us-east-1.on.aws/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(formData),
        });

        const result = await response.json();

        if (response.ok) {
          formStatus.textContent = 'Message sent successfully! I\'ll be in touch soon.';
          formStatus.className = 'rounded-lg p-4 text-center font-medium bg-green-100 text-green-800 border border-green-200';
          form.reset();
        } else {
          throw new Error(result.error || 'Failed to send message');
        }
      } catch (error) {
        formStatus.textContent = error.message || 'Something went wrong. Please try again or email directly.';
        formStatus.className = 'rounded-lg p-4 text-center font-medium bg-red-100 text-red-800 border border-red-200';
      } finally {
        submitBtn.disabled = false;
        btnText.textContent = 'Send Message';
        btnIcon.textContent = 'send';
      }
    });
  </script>
</Layout>
